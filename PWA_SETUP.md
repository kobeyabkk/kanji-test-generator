# ğŸ“± PWA ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ğŸ¯ æ¦‚è¦

æ¼¢å­—ãƒ†ã‚¹ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ã€PWAï¼ˆProgressive Web Appï¼‰ã¨ã—ã¦å‹•ä½œã—ã¾ã™ã€‚

---

## âœ¨ PWAæ©Ÿèƒ½

### 1ï¸âƒ£ **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œ**
- ãƒ—ãƒªãƒ³ãƒˆç”Ÿæˆæ©Ÿèƒ½ãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§å‹•ä½œ
- æ‰‹æ›¸ãç·´ç¿’æ©Ÿèƒ½ãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§å‹•ä½œ
- æ¼¢å­—ãƒ‡ãƒ¼ã‚¿ï¼ˆå°1ã€œå°6ã€1026å­—ï¼‰ã‚’äº‹å‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥

### 2ï¸âƒ£ **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½**
- PCã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã€ã‚¹ãƒãƒ›ã«ã‚¢ãƒ—ãƒªã¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½
- ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã§ãã‚‹
- ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œï¼ˆãƒ–ãƒ©ã‚¦ã‚¶UIãªã—ï¼‰

### 3ï¸âƒ£ **è‡ªå‹•æ›´æ–°**
- æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå…¬é–‹ã•ã‚Œã‚‹ã¨è‡ªå‹•æ¤œå‡º
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ›´æ–°é€šçŸ¥ã‚’è¡¨ç¤º
- ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§æœ€æ–°ç‰ˆã«æ›´æ–°

### 4ï¸âƒ£ **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥**
- **Cache First**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å„ªå…ˆã€é«˜é€Ÿå‹•ä½œ
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆHTML, CSS, JSï¼‰ã‚’äº‹å‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- æ¼¢å­—ãƒ‡ãƒ¼ã‚¿ï¼ˆJSONï¼‰ã‚’äº‹å‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥

---

## ğŸ“‹ æŠ€è¡“ä»•æ§˜

### Service Worker
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `service-worker.js`
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: `2.7.34`
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥å**: `kanji-practice-v2.7.34`

### Manifest
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `manifest.json`
- **ã‚¢ãƒ—ãƒªå**: æ¼¢å­—ãƒ†ã‚¹ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼
- **ã‚¢ãƒ—ãƒªID**: `com.kobeya.kanjipractice`

---

## ğŸš€ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

### **PCï¼ˆChrome/Edgeï¼‰**
1. ã‚¢ãƒ—ãƒªã‚’é–‹ã: https://kanji-test-generator.pages.dev
2. ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã®å³ç«¯ã«ã‚ã‚‹ã€Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã€Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### **iPhone/iPadï¼ˆSafariï¼‰**
1. ã‚¢ãƒ—ãƒªã‚’é–‹ã: https://kanji-test-generator.pages.dev
2. å…±æœ‰ãƒœã‚¿ãƒ³ï¼ˆâ–¡â†‘ï¼‰ã‚’ã‚¿ãƒƒãƒ—
3. ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—
4. ã€Œè¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—
5. ãƒ›ãƒ¼ãƒ ç”»é¢ã«ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### **Androidï¼ˆChromeï¼‰**
1. ã‚¢ãƒ—ãƒªã‚’é–‹ã: https://kanji-test-generator.pages.dev
2. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆâ‹®ï¼‰ã‚’ã‚¿ãƒƒãƒ—
3. ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—
4. ã€Œè¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—
5. ãƒ›ãƒ¼ãƒ ç”»é¢ã«ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## ğŸ”§ é–‹ç™ºè€…å‘ã‘æƒ…å ±

### Service Worker ã®ç™»éŒ²

`index.html` ã¨ `practice.html` ã§ Service Worker ã‚’ç™»éŒ²ï¼š

```javascript
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/service-worker.js')
      .then((registration) => {
        console.log('âœ… Service Workerç™»éŒ²æˆåŠŸ:', registration.scope);
      })
      .catch((error) => {
        console.error('âŒ Service Workerç™»éŒ²å¤±æ•—:', error);
      });
  });
}
```

### ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ¤œå‡º

æ–°ã—ã„ Service Worker ãŒè¦‹ã¤ã‹ã£ãŸã‚‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ï¼š

```javascript
navigator.serviceWorker.register('/service-worker.js')
  .then((registration) => {
    registration.addEventListener('updatefound', () => {
      const newWorker = registration.installing;
      
      newWorker.addEventListener('statechange', () => {
        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
          // æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½
          if (confirm('æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚æ›´æ–°ã—ã¾ã™ã‹ï¼Ÿ')) {
            newWorker.postMessage({ type: 'SKIP_WAITING' });
            window.location.reload();
          }
        }
      });
    });
  });
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢

é–‹ç™ºä¸­ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ï¼š

```javascript
navigator.serviceWorker.controller?.postMessage({ type: 'CLEAR_CACHE' });
```

ã¾ãŸã¯ã€Chrome DevTools ã§ï¼š
1. `F12` ã‚’æŠ¼ã™
2. `Application` ã‚¿ãƒ–ã‚’é–‹ã
3. `Service Workers` â†’ `Unregister` ã‚’ã‚¯ãƒªãƒƒã‚¯
4. `Storage` â†’ `Clear site data` ã‚’ã‚¯ãƒªãƒƒã‚¯

---

## ğŸ“Š ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

### é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
- `/` (ãƒ«ãƒ¼ãƒˆ)
- `/index.html` (ãƒ—ãƒªãƒ³ãƒˆç”Ÿæˆ)
- `/practice.html` (æ‰‹æ›¸ãç·´ç¿’)
- `/editor.html` (ãƒ‡ãƒ¼ã‚¿ç·¨é›†)
- `/app.js`
- `/practice.js`
- `/editor.js`
- `/style.css`
- `/practice.css`
- `/manifest.json`

### ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«
- `/data/grade1_kanji.json` (80å­—)
- `/data/grade2_kanji.json` (160å­—)
- `/data/grade3_kanji.json` (200å­—)
- `/data/grade4_kanji.json` (202å­—)
- `/data/grade5_kanji.json` (193å­—)
- `/data/grade6_kanji.json` (191å­—)

### ã‚¢ã‚¤ã‚³ãƒ³
- `/icons/icon-72x72.png`
- `/icons/icon-96x96.png`
- `/icons/icon-128x128.png`
- `/icons/icon-144x144.png`
- `/icons/icon-152x152.png`
- `/icons/icon-192x192.png`
- `/icons/icon-384x384.png`
- `/icons/icon-512x512.png`

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Service Worker ãŒç™»éŒ²ã•ã‚Œãªã„
- **åŸå› **: HTTPSæ¥ç¶šãŒå¿…è¦ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã¯é™¤ãï¼‰
- **è§£æ±º**: Cloudflare Pages ã§å…¬é–‹æ¸ˆã¿ã®ãŸã‚å•é¡Œãªã—

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ›´æ–°ã•ã‚Œãªã„
- **åŸå› **: Service Worker ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ã¦ã„ãªã„
- **è§£æ±º**: `service-worker.js` ã® `VERSION` ã‚’æ›´æ–°

### ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§å‹•ä½œã—ãªã„
- **åŸå› **: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ãªã„
- **è§£æ±º**: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ™‚ã«ä¸€åº¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½œæˆ

---

## ğŸ“± App Store / Google Play å…¬é–‹

å°†æ¥ã€Capacitor ã‚’ä½¿ã£ã¦ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªåŒ–ã—ã€App Store / Google Play ã«å…¬é–‹äºˆå®šã€‚

è©³ç´°ã¯ `CAPACITOR_SETUP.md` ã‚’å‚ç…§ã€‚

---

## ğŸ“ å‚è€ƒãƒªãƒ³ã‚¯

- [PWA ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆGoogleï¼‰](https://web.dev/progressive-web-apps/)
- [Service Worker APIï¼ˆMDNï¼‰](https://developer.mozilla.org/ja/docs/Web/API/Service_Worker_API)
- [Web App Manifestï¼ˆMDNï¼‰](https://developer.mozilla.org/ja/docs/Web/Manifest)

---

**åˆ¶ä½œ**: ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®KOBEYA  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.7.34  
**æœ€çµ‚æ›´æ–°**: 2026-01-31
