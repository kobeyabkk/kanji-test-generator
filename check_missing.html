<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸è¶³æ¼¢å­—ãƒã‚§ãƒƒã‚¯</title>
    
    <!-- ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ -->
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512x512.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192x192.png">
    <link rel="shortcut icon" href="/icons/favicon.ico">
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
        }
        .error {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }
        .missing-item {
            margin: 10px 0;
            padding: 15px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        .kanji-large {
            font-size: 3rem;
            font-weight: bold;
            color: #dc3545;
            display: inline-block;
            margin-right: 20px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .kanji-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .kanji-cell {
            padding: 10px;
            text-align: center;
            font-size: 1.5rem;
            background: white;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .missing {
            background: #f8d7da;
            border: 2px solid #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” å°1æ¼¢å­— ä¸è¶³ãƒã‚§ãƒƒã‚¯</h1>
        <p>å°å­¦1å¹´ç”Ÿã§ç¿’ã†ã¹ã80å­—ã®æ¼¢å­—ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚</p>
        
        <button onclick="checkMissing()">ãƒã‚§ãƒƒã‚¯é–‹å§‹</button>
        
        <div id="result"></div>
    </div>

    <script>
        // å°1ã§ç¿’ã†ã¹ã80å­—ï¼ˆ2020å¹´å­¦ç¿’æŒ‡å°è¦é ˜ï¼‰
        const grade1Standard = [
            'ä¸€', 'å³', 'é›¨', 'å††', 'ç‹', 'éŸ³', 'ä¸‹', 'ç«', 'èŠ±', 'è²',
            'å­¦', 'æ°—', 'ä¹', 'ä¼‘', 'ç‰', 'é‡‘', 'ç©º', 'æœˆ', 'çŠ¬', 'è¦‹',
            'äº”', 'å£', 'æ ¡', 'å·¦', 'ä¸‰', 'å±±', 'å­', 'å››', 'ç³¸', 'å­—',
            'è€³', 'ä¸ƒ', 'è»Š', 'æ‰‹', 'å', 'å‡º', 'å¥³', 'å°', 'ä¸Š', 'æ£®',
            'äºº', 'æ°´', 'æ­£', 'ç”Ÿ', 'é’', 'å¤•', 'çŸ³', 'èµ¤', 'åƒ', 'å·',
            'å…ˆ', 'æ—©', 'è‰', 'è¶³', 'æ‘', 'å¤§', 'ç”·', 'ç«¹', 'ä¸­', 'è™«',
            'ç”º', 'å¤©', 'ç”°', 'åœŸ', 'äºŒ', 'æ—¥', 'å…¥', 'å¹´', 'ç™½', 'å…«',
            'ç™¾', 'æ–‡', 'æœ¨', 'æœ¬', 'å', 'ç›®', 'ç«‹', 'åŠ›', 'æ—', 'å…­'
        ];

        let grade1Kanji = [];

        async function loadKanjiData() {
            try {
                const json1 = await fetch('data/grade1_kanji.json').then(r => r.json());
                grade1Kanji = json1;
                return true;
            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                return false;
            }
        }

        async function checkMissing() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p>ãƒã‚§ãƒƒã‚¯ä¸­...</p>';

            const loaded = await loadKanjiData();
            if (!loaded) {
                resultDiv.innerHTML = '<div class="result error"><strong>ã‚¨ãƒ©ãƒ¼:</strong> ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</div>';
                return;
            }

            // ç¾åœ¨ã®JSONã«ã‚ã‚‹æ¼¢å­—ã‚’å–å¾—
            const currentKanji = grade1Kanji.map(k => k.kanji);

            // ä¸è¶³ã—ã¦ã„ã‚‹æ¼¢å­—ã‚’æ¤œå‡º
            const missingKanji = grade1Standard.filter(k => !currentKanji.includes(k));

            // ä½™åˆ†ãªæ¼¢å­—ã‚’æ¤œå‡º
            const extraKanji = currentKanji.filter(k => !grade1Standard.includes(k));

            let html = '';

            // çµæœè¡¨ç¤º
            html += `<div style="margin: 20px 0; padding: 15px; background: #e3f2fd; border-radius: 8px;">`;
            html += `<strong>ğŸ“Š çµ±è¨ˆ:</strong><br>`;
            html += `æ­£ã—ã„æ¼¢å­—æ•°: 80å­—<br>`;
            html += `ç¾åœ¨ã®æ¼¢å­—æ•°: ${currentKanji.length}å­—<br>`;
            html += `ä¸è¶³: ${missingKanji.length}å­—<br>`;
            html += `ä½™åˆ†: ${extraKanji.length}å­—`;
            html += `</div>`;

            if (missingKanji.length > 0) {
                html += '<div class="result error">';
                html += `<strong>âš ï¸ ä¸è¶³ã—ã¦ã„ã‚‹æ¼¢å­—: ${missingKanji.length}å­—</strong>`;
                html += '</div>';

                html += '<h2>ä¸è¶³ã—ã¦ã„ã‚‹æ¼¢å­—</h2>';
                missingKanji.forEach(kanji => {
                    html += '<div class="missing-item">';
                    html += `<span class="kanji-large">${kanji}</span>`;
                    html += `<span>ã“ã®æ¼¢å­—ãŒJSONãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ã‚Šã¾ã›ã‚“</span>`;
                    html += '</div>';
                });
            }

            if (extraKanji.length > 0) {
                html += '<div class="result error" style="margin-top: 20px;">';
                html += `<strong>âš ï¸ ä½™åˆ†ãªæ¼¢å­—: ${extraKanji.length}å­—</strong>`;
                html += '</div>';

                html += '<h2>ä½™åˆ†ãªæ¼¢å­—ï¼ˆå°1ã§ã¯ãªã„ï¼‰</h2>';
                extraKanji.forEach(kanji => {
                    html += '<div class="missing-item">';
                    html += `<span class="kanji-large">${kanji}</span>`;
                    html += `<span>ã“ã®æ¼¢å­—ã¯å°1ã§ç¿’ã„ã¾ã›ã‚“</span>`;
                    html += '</div>';
                });
            }

            if (missingKanji.length === 0 && extraKanji.length === 0) {
                html += '<div class="result" style="background: #d4edda; border: 2px solid #28a745; color: #155724;">';
                html += '<strong>âœ… å®Œç’§ã§ã™ï¼</strong><br>';
                html += 'å°1ã®æ¼¢å­—80å­—ãŒã™ã¹ã¦æƒã£ã¦ã„ã¾ã™ã€‚';
                html += '</div>';
            }

            // å…¨80å­—ã‚’è¡¨ç¤ºï¼ˆä¸è¶³åˆ†ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰
            html += '<h2>å°1æ¼¢å­— å…¨80å­—</h2>';
            html += '<div class="kanji-grid">';
            grade1Standard.forEach(kanji => {
                const isMissing = missingKanji.includes(kanji);
                const className = isMissing ? 'kanji-cell missing' : 'kanji-cell';
                html += `<div class="${className}" title="${kanji}">${kanji}</div>`;
            });
            html += '</div>';

            resultDiv.innerHTML = html;
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯
        window.addEventListener('load', checkMissing);
    </script>
</body>
</html>
